function detectmob(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||$(window).width()<860&&"on"==appSettings[7].settingChoice?!0:!1}var appSettings=[{settingType:"redditNewTab",settingChoice:"off"},{settingType:"twitchVisualNotifications",settingChoice:"on"},{settingType:"twitchAudioNotifications",settingChoice:"on"},{settingType:"eSportsNotifications",settingChoice:"on"},{settingType:"defaultNameLink",settingChoice:"king"},{settingType:"defaultChampLink",settingChoice:"champselect"},{settingType:"smartEnter",settingChoice:"on"},{settingType:"newWindow",settingChoice:"on"}],settingsSaved;(settingsSaved=localStorage.getItem("appSettings"))?appSettings=JSON.parse(settingsSaved):localStorage.setItem("appSettings",JSON.stringify(appSettings));var LeagueLinks=function(){"undefined"!=typeof Storage?(this.name=localStorage.getItem("name"),this.server=localStorage.getItem("server"),this.champ=localStorage.getItem("champ"),this.newReignArticles=parseInt(localStorage.getItem("newReignArticles"))||0,this.newLeagueArticles=parseInt(localStorage.getItem("newLeagueArticles"))||0,this.newOnGamers=parseInt(localStorage.getItem("newOnGamers"))||0,this.oldDate=localStorage.getItem("date")||0,this.oldDate=parseInt(this.oldDate),localStorage.setItem("date",Date.now())):(this.name,this.server,this.champ,this.newReignArticles=0,this.newLeagueArticles=0,this.newOnGamers=0),this.name&&($(".name").val(this.name),$(".server").val(this.server),$(".submit-name").css("background-color","red"),this.nameLink()),this.champ&&($(".champ").val(this.champ),$(".submit-champ").css("background-color","red"),this.spaceAndDashChamp=this.champ.replace(/[^a-zA-Z ]/g,"").replace(/ /g,"-"),this.champ=this.champ.replace(/[^a-zA-Z]/g,""),this.champLink())};LeagueLinks.prototype.account=function(a,b){return this.name=a,this.server=b,"undefined"!=typeof Storage&&(localStorage.setItem("name",this.name),localStorage.setItem("server",this.server)),this.name?(this.nameLink(),!0):(this.returnOriginalUrl("website-name"),!1)},LeagueLinks.prototype.champion=function(a){return this.champ=a,"undefined"!=typeof Storage&&localStorage.setItem("champ",this.champ),this.champ?(this.spaceAndDashChamp=this.champ.replace(/[^a-zA-Z ]/g,"").replace(/ /g,"-"),this.champ=this.champ.replace(/[^a-zA-Z]/g,""),this.champLink(),!0):(this.returnOriginalUrl("website-champ"),!1)},LeagueLinks.prototype.returnOriginalUrl=function(a){for(var b=$("."+a),c=0;c<b.length;c++){var d=b.eq(c),e=d.data("url");d.attr("href",e)}},LeagueLinks.prototype.nameLink=function(){for(var a=$(".website-name"),b=0;b<a.length;b++){var c=a.eq(b),d=c.data("name");"nexus"==d?c.attr("href","http://www.lolnexus.com/"+this.server+"/search?name="+this.name+"&server="+this.server):"kassad"==d?c.attr("href","http://quickfind.kassad.in/profile/"+this.kassadServerName()+"/"+this.name+"/"):"now"==d?c.attr("href","http://www.lolking.net/now/"+this.server+"/"+this.name):"king"==d?c.attr("href","http://www.lolking.net/search?name="+this.name+"&region="+this.server):"gg"==d&&c.attr("href","http://"+this.server+".op.gg/summoner/userName="+this.name)}},LeagueLinks.prototype.champLink=function(){for(var a=$(".website-champ"),b=0;b<a.length;b++){var c=a.eq(b),d=c.data("name");"counter"==d?c.attr("href","http://www.lolcounter.com/champ/"+this.champ):"champselect"==d?c.attr("href","http://www.championselect.net/champ/"+this.spaceAndDashChamp):"kingchamp"==d?c.attr("href","http://www.lolking.net/champions/"+this.champ):"tsm"==d?c.attr("href","http://www.solomid.net/guide?champ="+this.champ):"elo"==d?c.attr("href","http://www.elophant.com/league-of-legends/champion/"+this.spaceAndDashChamp+"/stats"):"moba"==d?c.attr("href","http://www.mobafire.com/league-of-legends/"+this.spaceAndDashChamp+"-guide"):"lolpro"==d&&c.attr("href","http://www.lolpro.com/guides/"+this.spaceAndDashChamp)}},LeagueLinks.prototype.championList=[{name:"aatrox",xpos:-0,ypos:-0},{name:"ahri",xpos:-36,ypos:-0},{name:"akali",xpos:-72,ypos:-0},{name:"alistar",xpos:-108,ypos:-0},{name:"amumu",xpos:-144,ypos:-0},{name:"anivia",xpos:-180,ypos:-0},{name:"annie",xpos:-216,ypos:-0},{name:"ashe",xpos:-252,ypos:-0},{name:"blitzcrank",xpos:-288,ypos:-0},{name:"brand",xpos:-324,ypos:-0},{name:"caitlyn",xpos:-0,ypos:-36},{name:"cassiopeia",xpos:-36,ypos:-36},{name:"cho'gath",xpos:-72,ypos:-36},{name:"corki",xpos:-108,ypos:-36},{name:"darius",xpos:-144,ypos:-36},{name:"diana",xpos:-180,ypos:-36},{name:"dr. mundo",xpos:-216,ypos:-36},{name:"draven",xpos:-252,ypos:-36},{name:"elise",xpos:-288,ypos:-36},{name:"evelynn",xpos:-324,ypos:-36},{name:"ezreal",xpos:-0,ypos:-72},{name:"fiddlesticks",xpos:-36,ypos:-72},{name:"fiora",xpos:-72,ypos:-72},{name:"fizz",xpos:-108,ypos:-72},{name:"galio",xpos:-144,ypos:-72},{name:"gangplank",xpos:-180,ypos:-72},{name:"garen",xpos:-216,ypos:-72},{name:"gragas",xpos:-252,ypos:-72},{name:"graves",xpos:-288,ypos:-72},{name:"hecarim",xpos:-324,ypos:-72},{name:"heimerdinger",xpos:-0,ypos:-108},{name:"irelia",xpos:-36,ypos:-108},{name:"janna",xpos:-72,ypos:-108},{name:"jarvan IV",xpos:-108,ypos:-108},{name:"jax",xpos:-144,ypos:-108},{name:"jayce",xpos:-180,ypos:-108},{name:"jinx",xpos:-216,ypos:-108},{name:"karma",xpos:-252,ypos:-108},{name:"karthus",xpos:-288,ypos:-108},{name:"kassadin",xpos:-324,ypos:-108},{name:"katarina",xpos:-0,ypos:-144},{name:"kayle",xpos:-36,ypos:-144},{name:"kennen",xpos:-72,ypos:-144},{name:"kha'zix",xpos:-108,ypos:-144},{name:"kog'maw",xpos:-144,ypos:-144},{name:"leblanc",xpos:-180,ypos:-144},{name:"leesin",xpos:-216,ypos:-144},{name:"leona",xpos:-252,ypos:-144},{name:"lissandra",xpos:-288,ypos:-144},{name:"lucian",xpos:-324,ypos:-144},{name:"lulu",xpos:-0,ypos:-180},{name:"lux",xpos:-36,ypos:-180},{name:"malphite",xpos:-72,ypos:-180},{name:"malzahar",xpos:-108,ypos:-180},{name:"maokai",xpos:-144,ypos:-180},{name:"master yi",xpos:-180,ypos:-180},{name:"miss fortune",xpos:-216,ypos:-180},{name:"mordekaiser",xpos:-288,ypos:-180},{name:"morgana",xpos:-324,ypos:-180},{name:"nami",xpos:-0,ypos:-216},{name:"nasus",xpos:-36,ypos:-216},{name:"nautilus",xpos:-72,ypos:-216},{name:"nidalee",xpos:-108,ypos:-216},{name:"nocturne",xpos:-144,ypos:-216},{name:"nunu",xpos:-180,ypos:-216},{name:"olaf",xpos:-216,ypos:-216},{name:"orianna",xpos:-252,ypos:-216},{name:"pantheon",xpos:-288,ypos:-216},{name:"poppy",xpos:-324,ypos:-216},{name:"quinn",xpos:-0,ypos:-252},{name:"rammus",xpos:-36,ypos:-252},{name:"renekton",xpos:-72,ypos:-252},{name:"rengar",xpos:-108,ypos:-252},{name:"riven",xpos:-144,ypos:-252},{name:"rumble",xpos:-180,ypos:-252},{name:"ryze",xpos:-216,ypos:-252},{name:"sejuani",xpos:-252,ypos:-252},{name:"shaco",xpos:-288,ypos:-252},{name:"shen",xpos:-324,ypos:-252},{name:"shyvana",xpos:-0,ypos:-288},{name:"singed",xpos:-36,ypos:-288},{name:"sion",xpos:-72,ypos:-288},{name:"sivir",xpos:-108,ypos:-288},{name:"skarner",xpos:-144,ypos:-288},{name:"sona",xpos:-180,ypos:-288},{name:"soraka",xpos:-216,ypos:-288},{name:"swain",xpos:-252,ypos:-288},{name:"syndra",xpos:-288,ypos:-288},{name:"talon",xpos:-324,ypos:-288},{name:"taric",xpos:-0,ypos:-324},{name:"teemo",xpos:-36,ypos:-324},{name:"thresh",xpos:-72,ypos:-324},{name:"tristana",xpos:-108,ypos:-324},{name:"trundle",xpos:-144,ypos:-324},{name:"tryndamere",xpos:-180,ypos:-324},{name:"twisted fate",xpos:-216,ypos:-324},{name:"twitch",xpos:-252,ypos:-324},{name:"udyr",xpos:-288,ypos:-324},{name:"urgot",xpos:-324,ypos:-324},{name:"varus",xpos:-0,ypos:-360},{name:"vayne",xpos:-36,ypos:-360},{name:"veigar",xpos:-72,ypos:-360},{name:"vel'koz",xpos:-252,ypos:-396},{name:"vi",xpos:-108,ypos:-360},{name:"viktor",xpos:-144,ypos:-360},{name:"vladimir",xpos:-180,ypos:-360},{name:"volibear",xpos:-216,ypos:-360},{name:"warwick",xpos:-252,ypos:-360},{name:"wukong",xpos:-252,ypos:-180},{name:"xerath",xpos:-288,ypos:-360},{name:"xin zhao",xpos:-324,ypos:-360},{name:"yasuo",xpos:-0,ypos:-396},{name:"yorick",xpos:-36,ypos:-396},{name:"zac",xpos:-72,ypos:-396},{name:"zed",xpos:-108,ypos:-396},{name:"ziggs",xpos:-144,ypos:-396},{name:"zilean",xpos:-180,ypos:-396},{name:"zyra",xpos:-216,ypos:-396}],LeagueLinks.prototype.championCompare=function(a){for(var b=0;b<this.championList.length;b++)if(this.championList[b]==a)return!0;return!1},LeagueLinks.prototype.dropDownTemplate=function(a){var b=this,c=Handlebars.compile($("#champion-template").html());if(0==a.length)$("#champ-drop").html(c(b.championList));else for(var d=[],e=0,f=new RegExp("^"+a,"i"),g=0;g<b.championList.length;g++)b.championList[g].name.match(f)&&(d[e]={name:b.championList[g].name,xpos:b.championList[g].xpos,ypos:b.championList[g].ypos},e++),$("#champ-drop").html(c(d))},LeagueLinks.prototype.serverList=["na","euw","eune","br","tr","ru","lan","las","oce"],LeagueLinks.prototype.kassadServerName=function(){return"eune"==this.server?"eun":"oce"==this.server?"oc":this.server},LeagueLinks.prototype.reignOfGaming=function(){var a=$.Deferred(),b=this;return $.ajax({type:"GET",url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=1000&callback=?&q="+encodeURIComponent("http://www.reignofgaming.net/news.rss"),dataType:"json",error:function(){console.log("Unable to load reign of gaming feed")},success:function(c){for(var d=c.responseData.feed.entries,e=0;e<d.length;e++){var f=new Date(d[e].publishedDate).getTime();f>b.oldDate&&b.newReignArticles++}localStorage.setItem("newReignArticles",b.newReignArticles),a.resolve()}}),a.promise()},LeagueLinks.prototype.onGamers=function(){var a=$.Deferred(),b=this;return $.ajax({type:"GET",url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=1000&callback=?&q="+encodeURIComponent("http://www.ongamers.com/league-of-legends/6000-2/rss/"),dataType:"json",error:function(){console.log("Unable to to load onGamers feed.")},success:function(c){for(var d=c.responseData.feed.entries,e=0;e<d.length;e++){var f=new Date(d[e].publishedDate).getTime();f>b.oldDate&&b.newOnGamers++}localStorage.setItem("newOnGamers",b.newOnGamers),a.resolve()}}),a.promise()},LeagueLinks.prototype.LolInfo=function(){var a=$.Deferred(),b=this;return $.ajax({type:"GET",url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=1000&callback=?&q="+encodeURIComponent("http://na.leagueoflegends.com/en/rss.xml"),dataType:"json",error:function(){console.log("Unable to load LeagueOfLegends feed.")},success:function(c){for(var d=c.responseData.feed.entries,e=0;e<d.length;e++){var f=new Date(d[e].publishedDate).getTime();f>b.oldDate&&b.newLeagueArticles++}localStorage.setItem("newLeagueArticles",b.newLeagueArticles),a.resolve()}}),a.promise()};var streamChannels=function(){this.streamers=JSON.parse(localStorage.getItem("streamers"));var a=[];this.streamers||(localStorage.setItem("streamers",JSON.stringify(a)),this.streamers=JSON.parse(localStorage.getItem("streamers"))),this.twitchStreamersOnline=[],this.topTwitchStreamersOnline=[],this.twitchStreamersOffline=[],this.azubuStreamersOffline=[],this.azubuStreamersOnline=[],this.topAzubuStreamersOnline=[],this.totalStreamersOnline=0,this.streamerCount=0,this.newAdditions=[],this.currentStreamDisplayed=null,this.currentStreamViewers=null,this.streamFunctionCount=0,this.noStreamersAdded=0==this.streamers.length?!0:!1};streamChannels.prototype.submitStreamer=function(a,b){var c,d="";if(a){if("azubu"==b)d=a,c="azubu";else if(a.match(/azubu.tv/i)){c="azubu";var e=/\d{13}/gi;d=e.exec(a).toString()}else{var a=a.trim();c="twitch",d=a.replace(/((.*?:\/\/)|www.twitch.tv\/)|(\s)/gi,"").toLowerCase()}if(d){for(var f=!0,g=0;g<this.streamers.length;g++)this.streamers[g].name==d&&(f=!1);return f&&(this.streamers[this.streamers.length]={name:d,service:c}),localStorage.setItem("streamers",JSON.stringify(this.streamers)),this.noStreamersAdded=0==this.streamers.length?!0:!1,!0}}return!1},streamChannels.prototype.onlineTwitchStreamers=function(){var a=$.Deferred(),b=this,c="";if(this.noStreamersAdded)return localStorage.setItem("twitchStreamersOnline","[]"),localStorage.setItem("twitchStreamersOffline","[]"),a.resolve(),a.promise();for(var d=0;d<this.streamers.length;d++)"twitch"==this.streamers[d].service&&(c+=this.streamers[d].name+",");return $.ajax({dataType:"jsonp",url:"https://api.twitch.tv/kraken/streams?channel="+c,error:function(){console.log("Unable to twitch favourites api")},success:function(c){if(b.twitchStreamersOnline=[],c.streams)for(var d=0;d<c.streams.length;d++)b.twitchStreamersOnline[d]={name:c.streams[d].channel.name,displayName:c.streams[d].channel.display_name,viewTotal:c.streams[d].viewers,url:c.streams[d].channel.url,thumbnailUrl:c.streams[d].preview.medium,id:d},b.totalStreamersOnline++;localStorage.setItem("totalStreamersOnline",JSON.stringify(b.totalStreamersOnline)),localStorage.setItem("twitchStreamersOnline",JSON.stringify(b.twitchStreamersOnline)),a.resolve()}}),a.promise()},streamChannels.prototype.getAzubuStreamers=function(){var a=$.Deferred(),b=this;return $.ajax({dataType:"jsonp",url:"http://liveleaguestream.com/json.php?method=getAll&jsoncallback=?",error:function(){console.log("Unable to load azubu api")},success:function(c){var d=0,e=0,f=0;b.topAzubuStreamersOnline=[],b.azubuStreamersOnline=[],b.azubuStreamersOffline=[];for(var g=0;g<c.length;g++)if("0"!=c[g].Online){for(var h=!1,i=0;i<b.streamers.length;i++)c[g].Azubu_ID==b.streamers[i].name&&(h=!0);b.topAzubuStreamersOnline[f]={name:c[g].Name,id:c[g].Azubu_ID,count:f,online:!0,isAlreadyAdded:h},f++;for(var j=0;j<b.streamers.length;j++)b.streamers[j].name==c[g].Azubu_ID&&(b.azubuStreamersOnline[d]={name:c[g].Name,id:c[g].Azubu_ID,online:!0},d++,b.totalStreamersOnline++)}else for(var k=0;k<b.streamers.length;k++)b.streamers[k].name==c[g].Azubu_ID&&(b.azubuStreamersOffline[e]={name:c[g].Name,id:c[g].Azubu_ID,online:!1},e++);localStorage.setItem("totalStreamersOnline",JSON.stringify(b.totalStreamersOnline)),localStorage.setItem("topAzubuStreamersOnline",JSON.stringify(b.topAzubuStreamersOnline)),localStorage.setItem("azubuStreamersOnline",JSON.stringify(b.azubuStreamersOnline)),localStorage.setItem("azubuStreamersOffline",JSON.stringify(b.azubuStreamersOffline)),a.resolve()}}),a.promise()},streamChannels.prototype.topTwitchOnline=function(a){var b=a||12,c=$.Deferred(),d=this;return $.ajax({dataType:"jsonp",url:"https://api.twitch.tv/kraken/search/streams?q=%22league%20of%20legends%22&limit="+b,error:function(){console.log("Unable to load top twitch streamers feed.")},success:function(a){if(d.topTwitchStreamersOnline=[],a.streams)for(var b=0;b<a.streams.length;b++){for(var e=!1,f=0;f<d.twitchStreamersOnline.length;f++)a.streams[b].channel.name==d.twitchStreamersOnline[f].name&&(e=!0);d.topTwitchStreamersOnline[b]={name:a.streams[b].channel.name,displayName:a.streams[b].channel.display_name,viewTotal:a.streams[b].viewers,thumbnailUrl:a.streams[b].preview.medium,url:a.streams[b].channel.url,isAlreadyAdded:e,id:b}}localStorage.setItem("topTwitchStreamersOnline",JSON.stringify(d.topTwitchStreamersOnline)),c.resolve()}}),c.promise()},streamChannels.prototype.offlineTwitchStreamers=function(){this.twitchStreamersOffline=[],this.twitchStreamersOffline=this.streamers.slice(0);for(var a=[],b=0;b<this.streamers.length;b++)"twitch"!=this.twitchStreamersOffline[b].service&&a.push(b);a.reverse();for(var c=0;c<a.length;c++)this.twitchStreamersOffline.splice(a[c],1);for(var d=0;d<this.twitchStreamersOnline.length;d++){for(var e,f=0;f<this.twitchStreamersOffline.length;f++)this.twitchStreamersOffline[f].name==this.twitchStreamersOnline[d].name&&(e=f);e>-1&&this.twitchStreamersOffline.splice(e,1)}localStorage.setItem("twitchStreamersOffline",JSON.stringify(this.twitchStreamersOffline))},streamChannels.prototype.removeStreamer=function(a){var b=a.toString().toLowerCase();if(b){for(var c=0;c<this.streamers.length;c++)this.streamers[c].name==b&&this.streamers.splice(c,1);return localStorage.setItem("streamers",JSON.stringify(this.streamers)),this.noStreamersAdded=0==this.streamers.length?!0:!1,!0}return!1},streamChannels.prototype.pushTwitchStreams=function(a,b){var c=this,d=Handlebars.compile($("#twitch-template").html()),a=a||0;"top"==b?($("#twitch-online-content").html(d(c.topTwitchStreamersOnline[a])),c.currentStreamDisplayed=c.topTwitchStreamersOnline[a].name,c.currentStreamViewers=c.topTwitchStreamersOnline[a].viewTotal):c.twitchStreamersOnline.length>0&&($("#twitch-online-content").html(d(c.twitchStreamersOnline[a])),c.currentStreamDisplayed=c.twitchStreamersOnline[a].name,c.currentStreamViewers=c.twitchStreamersOnline[a].viewTotal)},streamChannels.prototype.pushStreamsHeader=function(){for(var a=this,b=0;b<a.topTwitchStreamersOnline.length;b++)if("riotgames"==a.topTwitchStreamersOnline[b].name&&"on"==appSettings[3].settingChoice){var c=Handlebars.compile($("#riot-online-message-template").html());$("#riot-online").html(c()),$("#top-header-message").css("padding","14px")}},streamChannels.prototype.pushTwitchStreamers=function(a){var b=this;if(null==a){var c=Handlebars.compile($("#twitch-users-online-template").html()),d=Handlebars.compile($("#twitch-users-offline-template").html());$("#twitch-list-online").html(c(b.twitchStreamersOnline)),$("#twitch-list-offline").html(d(b.twitchStreamersOffline))}else{var e=Handlebars.compile($("#twitch-user-favourited-online-template").html());$("#twitch-list-online").append(e(b.topTwitchStreamersOnline[a]))}},streamChannels.prototype.pushAzubuStreamers=function(a){var b=this;if(null==a){var c=Handlebars.compile($("#azubu-users-online-template").html()),d=Handlebars.compile($("#azubu-users-offline-template").html()),e=Handlebars.compile($("#azubu-top-online-template").html());$("#azubu-top-streamers").html(e(b.topAzubuStreamersOnline)),$("#azubu-list-online").html(c(b.azubuStreamersOnline)),$("#azubu-list-offline").html(d(b.azubuStreamersOffline))}else{var f=Handlebars.compile($("#azubu-users-favourited-online-template").html());$("#azubu-list-online").append(f(b.topAzubuStreamersOnline[a]))}},streamChannels.prototype.pushTopStreamerOnline=function(a,b,c){var d=this;if(c)for(var c=Handlebars.compile($("#twitch-template").html()),e=0;e<d.topTwitchStreamersOnline.length;e++)d.topTwitchStreamersOnline[e].name==a&&$("#twitch-online-content").prepend(c(d.topTwitchStreamersOnline[e]));if(b)for(var f=Handlebars.compile($("#twitch-add-user-online-template").html()),e=0;e<d.topTwitchStreamersOnline.length;e++)d.topTwitchStreamersOnline[e].name==a&&$("#twitch-list-online").append(f(d.topTwitchStreamersOnline[e]))},streamChannels.prototype.pushTopTwitchStreamers=function(){var a=this,b=Handlebars.compile($("#twitch-top-online-template").html());$("#twitch-top-streamers").html(b(a.topTwitchStreamersOnline))},streamChannels.prototype.currentStreamOnline=function(){for(var a=0;a<this.topTwitchStreamersOnline.length;a++)if(this.topTwitchStreamersOnline[a].name==this.currentStreamDisplayed)return!0;for(var b=0;b<this.twitchStreamersOnline.length;b++)if(this.twitchStreamersOnline[b].name==this.currentStreamDisplayed)return!0;return!1},streamChannels.prototype.pushTopTwitchStreamers=function(){var a=this,b=Handlebars.compile($("#twitch-top-online-template").html());$("#twitch-top-streamers").html(b(a.topTwitchStreamersOnline))},streamChannels.prototype.favouriteStreamerMessage=function(a,b){var c=0;this.newAdditions=[];for(var d=0;d<this.azubuStreamersOnline.length;d++){for(var e=!1,f=0;f<a.length;f++)a[f].name==this.azubuStreamersOnline[d].name&&(e=!0);e||(this.newAdditions[c]={name:this.azubuStreamersOnline[d].name,id:this.azubuStreamersOnline[d].id,azubu:!0},c++)}for(var g=0;g<this.twitchStreamersOnline.length;g++){for(var h=!1,i=0;i<b.length;i++)b[i].name==this.twitchStreamersOnline[g].name&&(h=!0);h||(this.newAdditions[c]={name:this.twitchStreamersOnline[g].name,id:null,twitch:!0},c++)}if(c>0&&("on"==appSettings[1].settingChoice&&$("#sound").html('<audio controls autoplay style="display:none"><source src="assets/sound/notify.mp3" hidden="true" autostart="true" loop="false" type="audio/mpeg"></audio>'),"on"==appSettings[2].settingChoice)){var j=Handlebars.compile($("#streamer-online-message-template").html());$("#favourite-online").html(j(this.newAdditions)),$("#top-header-message").css("padding","14px")}};var RedditLol=function(){this.youtubeVids=[],this.redditThreads=[],this.currentRedditSettings=[null,"leagueoflegends","hot",null],this.currentYoutubeSettings=[null,"leagueoflegends","hot",null],this.youtubeCount=0,this.redditCount=0,this.nextPageReddit,this.nextPageYoutube,this.previousYoutubeLength=0,this.previousRedditLength=0,this.redditAjaxRequest};RedditLol.prototype.getThreads=function(a,b,c,d,e){var f=a,g="";b&&c&&d&&e?g="http://www.reddit.com/r/"+b+"/"+c+".json?limit=100&t="+d+"&after="+e+"&jsonp=":b&&c&&d?g="http://www.reddit.com/r/"+b+"/"+c+".json?limit=100&t="+d+"&jsonp=":b&&c&&e?g="http://www.reddit.com/r/"+b+"/"+c+".json?limit=100&after="+e+"&jsonp=":b&&c&&(g="http://www.reddit.com/r/"+b+"/"+c+".json?limit=100&jsonp=");var h=$.Deferred(),i=this;return i.redditAjaxRequest=$.ajax({dataType:"json",url:g,error:function(){console.log("Unable to load reddit api")},success:function(a){var b=a.data.children,c=0;"youtube"==f?i.previousYoutubeLength=i.youtubeVids.length:"reddit"==f&&(i.previousRedditLength=i.redditThreads.length);for(var d=0;d<b.length;d++){var e=b[d].data.domain;null==f?(localStorage.setItem("redditLastRetrieved",Date.now()),localStorage.setItem("youtubeLastRetrieved",Date.now()),i.redditThreads[d]={domain:b[d].data.domain,title:b[d].data.title,url:b[d].data.url,score:b[d].data.score,commentsTotal:b[d].data.num_comments,permalink:b[d].data.permalink,created:b[d].data.created_utc,content:b[d].data.selftext_html,author:b[d].data.author,thumbnail:b[d].data.thumbnail,redditRank:d+1+i.previousRedditLength,linkFlair:b[d].data.link_flair_css_class,authorFlair:b[d].data.author_flair_css_class,videoEmbed:null,after:a.data.after},"youtube.com"!=e&&"youtu.be"!=e||b[d].data.url.match(/user/i)||null==b[d].data.media||"undefined"==typeof b[d].data.media.oembed.url||(i.youtubeVids[c]={title:b[d].data.title,url:b[d].data.media.oembed.url,videoEmbed:b[d].data.media.oembed.url.replace(/watch\?v=/i,"embed/"),score:b[d].data.score,created:b[d].data.created_utc,author:b[d].data.author,commentsTotal:b[d].data.num_comments,permalink:b[d].data.permalink,redditRank:d+1,videoRank:c+1,after:a.data.after},c++,i.redditThreads[d].videoEmbed=b[d].data.media.oembed.url.replace(/watch\?v=/i,"embed/")),i.nextPageYoutube=a.data.after,i.nextPageReddit=a.data.after):"youtube"==f?(localStorage.setItem("youtubeLastRetrieved",Date.now()),"youtube.com"!=e&&"youtu.be"!=e||b[d].data.url.match(/user/i)||null==b[d].data.media||"undefined"==typeof b[d].data.media.oembed.url||(i.youtubeVids[c+i.previousYoutubeLength]={title:b[d].data.title,url:b[d].data.media.oembed.url,videoEmbed:b[d].data.media.oembed.url.replace(/watch\?v=/i,"embed/"),score:b[d].data.score,created:b[d].data.created_utc,author:b[d].data.author,commentsTotal:b[d].data.num_comments,permalink:b[d].data.permalink,redditRank:d+1,videoRank:c+i.previousYoutubeLength+1,after:a.data.after},c++),i.nextPageYoutube=a.data.after):"reddit"==f&&(localStorage.setItem("redditLastRetrieved",Date.now()),i.redditThreads[d+i.previousRedditLength]={domain:b[d].data.domain,title:b[d].data.title,url:b[d].data.url,score:b[d].data.score,commentsTotal:b[d].data.num_comments,permalink:b[d].data.permalink,created:b[d].data.created_utc,content:b[d].data.selftext_html,author:b[d].data.author,thumbnail:b[d].data.thumbnail,redditRank:d+1+i.previousRedditLength,linkFlair:b[d].data.link_flair_css_class,authorFlair:b[d].data.author_flair_css_class,videoEmbed:null,after:a.data.after},"youtube.com"!=e&&"youtu.be"!=e||b[d].data.url.match(/user/i)||null==b[d].data.media||"undefined"==typeof b[d].data.media.oembed.url||(i.redditThreads[d+i.previousRedditLength].videoEmbed=b[d].data.media.oembed.url.replace(/watch\?v=/i,"embed/")),i.nextPageReddit=a.data.after)}if("youtube"!=f)for(var g=0;g<i.redditThreads.length;g++)("self"==i.redditThreads[g].thumbnail||"default"==i.redditThreads[g].thumbnail)&&(i.redditThreads[g].thumbnail="assets/img/default.png");localStorage.setItem("redditThreads",JSON.stringify(i.redditThreads)),localStorage.setItem("nextPage",i.nextPageReddit),localStorage.setItem("redditSettings",JSON.stringify(i.currentRedditSettings)),h.resolve()}}),h.promise()},RedditLol.prototype.youtubeArea=function(){var a=this,b=Handlebars.compile($("#youtube-template").html());0==a.youtubeVids.length&&$("#reddit-progress").html("<p>Sorry all out of reddit threads for now</p>");for(var c=0;4>c;c++)a.youtubeVids.length>a.youtubeCount&&($("#youtube-threads").append(b(a.youtubeVids[a.youtubeCount])),a.youtubeCount++)},RedditLol.prototype.mainPage=function(a){var b=this,c=Handlebars.compile($("#reddit-template").html());b.redditThreads.length<25&&$("#reddit-progress").html("<p>Sorry all out of reddit threads for now</p>");var d=25;a&&(d=b.redditThreads.length);for(var e=0;d>e;e++)if(b.redditThreads.length>b.redditCount){$("#reddit-threads").append(c(b.redditThreads[b.redditCount]));var f=$(".reddit-expand").eq(b.redditCount).children(".decode");f.html(f.text()),b.redditCount++}};var WebInterface=function(){this.youtubeInUse="",this.redditInUse="",this.twitchInUse="",this.tabSystemProcessed=0};WebInterface.prototype.checkIfBelongs=function(a,b){for(var c=a||"",d=$(".iframe-capable"+c),e=0;e<d.length;e++){var f=d.eq(e),g=f.data("name");if("#"+g==window.location.hash)return b&&$("a#"+g+" li").addClass("selected-link"),f.attr("href")}return!1},WebInterface.prototype.makeIframe=function(a){$("#main-content").css("display","none");var b=$("#iframe-holder"),c=$(window).height()-4,d=c-16;b.css("height",d+"px"),b.html('<iframe id="iframe-content" src="'+a+'" style="width:100%;height:'+c+'px;border:none;padding:none;margin:none"><p>Your browser does not support iframes.</p></iframe>').fadeIn()},WebInterface.prototype.changeIframeHeight=function(){if("none"==$("#main-content").css("display")){var a=$(window).height()-4,b=a-16;$("#iframe-holder").css("height",b+"px"),$("#iframe-content").css("height",a+"px")}},WebInterface.prototype.changeTwitchDimensions=function(){var a=450,b=$(window).width()-a-$(".twitch-chat-area").width();if(detectmob()){a=50;var b=$(window).width()-a}else if("none"==$("#sidebar").css("display")){a=90;var b=$(window).width()-a-$(".twitch-chat-area").width()}var c=b/16*9;$(".twitch-video").css({width:b,height:c+"px"}),$(".twitch-chat").css("height",c+"px"),$(".twitch-chat-area").css("height",c+"px")},WebInterface.prototype.setSettings=function(){$(".redditNewTab").val(appSettings[0].settingChoice),$(".twitchVisualNotifications").val(appSettings[1].settingChoice),$(".twitchAudioNotifications").val(appSettings[2].settingChoice),$(".eSportsNotifications").val(appSettings[3].settingChoice),$(".defaultNameLink").val(appSettings[4].settingChoice),$(".defaultChampLink").val(appSettings[5].settingChoice),$(".smartEnter").val(appSettings[6].settingChoice),$(".newWindow").val(appSettings[7].settingChoice)},WebInterface.prototype.saveSettings=function(){appSettings[0].settingChoice=$(".redditNewTab").val(),appSettings[1].settingChoice=$(".twitchVisualNotifications").val(),appSettings[2].settingChoice=$(".twitchAudioNotifications").val(),appSettings[3].settingChoice=$(".eSportsNotifications").val(),appSettings[4].settingChoice=$(".defaultNameLink").val(),appSettings[5].settingChoice=$(".defaultChampLink").val(),appSettings[6].settingChoice=$(".smartEnter").val(),appSettings[7].settingChoice=$(".newWindow").val(),localStorage.setItem("appSettings",JSON.stringify(appSettings))},WebInterface.prototype.registerScreen=function(){if(detectmob())$("#sidebar").addClass("clear").css({position:"relative",width:"100%",height:"auto"}),$("#sidebar-content").css({"background-color":"#262729",position:"relative"}),$("#main-content, #iframe-holder").css("margin-left","0px"),$(".nav-expand").removeAttr("style").addClass("nav-expand-mobile"),$(".champtionbuttons").css("padding-bottom","30px");else{var a=$("#sidebar");a.perfectScrollbar(),$("#champ-drop").perfectScrollbar({wheelSpeed:20,useKeyboard:!0}),$(".nav-expand").removeClass("nav-expand-mobile"),a.css({position:"",width:"",height:""}),$("#sidebar-content, .nav-expand").removeAttr("style"),$("#iframe-holder, #main-content").css("margin-left"," "),$(".championbuttons").css("padding-bottom","0px"),"none"==a.css("display")&&($("#main-content, #iframe-holder").css("margin-left","0px"),$(".nav-expand").css("left","0px"))}},$(function(){function a(){if(d.match(/youtubevideos/i))$("#iframe-holder").html(" ").css("display","none"),$("#main-content").css("display","block"),$("header").css("height","100px"),$("#youtube-content").css("display","block"),$("#reddit-content").css("display","none"),$("#twitch-content").css("display","none"),$("#settings-content").css("display","none"),$("a#youtube li").addClass("selected-link"),g.getThreads(g.currentYoutubeSettings[0],g.currentYoutubeSettings[1],g.currentYoutubeSettings[2],g.currentYoutubeSettings[3],g.nextPageYoutube).done(function(){g.youtubeArea(),g.mainPage(),$(window).height()>1080&&g.youtubeArea()}),h.twitchInUse="no";else if(d.match(/settings/i))$("#iframe-holder").html(" ").css("display","none"),$("#main-content").css("display","block"),$("header").css("height","28px"),$("#youtube-content").css("display","none"),$("#reddit-content").css("display","none"),$("#twitch-content").css("display","none"),$("#settings-content").css("display","block"),$("a#settings li").addClass("selected-link"),h.setSettings(),g.getThreads(g.currentRedditSettings[0],g.currentRedditSettings[1],g.currentRedditSettings[2],g.currentRedditSettings[3],g.nextPageReddit).done(function(){g.mainPage(),h.youtubeInUse="contentAvailable"}),h.twitchInUse="no",h.youtubeInUse="no";else if(d.match(/twitchstreams/i))$("#iframe-holder").html(" ").css("display","none"),$("#main-content").css("display","block"),$("header").css("height","28px"),$("#youtube-content").css("display","none"),$("#reddit-content").css("display","none"),$("#settings-content").css("display","none"),$("#twitch-content").css("display","block"),$("#twitch-content").css("display","block"),$("a#twitch li").addClass("selected-link"),h.youtubeInUse="no",h.redditInUse="no";else if(h.checkIfBelongs()){if(!detectmob()){var a=h.checkIfBelongs(null,!0);$("#iframe-holder").css("display","block"),h.makeIframe(a)}h.youtubeInUse="no",h.redditInUse="no",h.twitchInUse="no"}else{if($("a#reddit li").addClass("selected-link"),d.match(/back/i)&&parseInt(localStorage.getItem("redditLastRetrieved"))+36e5>=Date.now()){g.redditThreads=JSON.parse(localStorage.getItem("redditThreads")),g.nextPageReddit=localStorage.getItem("nextPage");var b=localStorage.getItem("yScroll");g.currentRedditSettings=JSON.parse(localStorage.getItem("redditSettings")),g.mainPage(!0),$("#sidebar").css("display",localStorage.getItem("sidebarOpen")),setTimeout(function(){$(window).scrollTop(b)},100),setTimeout(function(){history.pushState("","","#")},1755),$(".subreddit-setting").removeClass("setting-chosen"),$(".subreddit-"+g.currentRedditSettings[1]+" ").addClass("setting-chosen"),$(".dropdown-subreddit").val(g.currentRedditSettings[1]),$(".dropdown-reddit-options").val(null!=g.currentRedditSettings[3]?g.currentRedditSettings[2]+g.currentRedditSettings[3]:g.currentRedditSettings[2]),null!=g.currentRedditSettings[0]&&"hot"!=g.currentRedditSettings[2]&&($(".reddit-setting").removeClass("setting-chosen"),$("."+g.currentRedditSettings[3]+g.currentRedditSettings[2]+"-reddit").addClass("setting-chosen")),h.youtubeInUse="no",h.redditInUse="no",h.twitchInUse="no"}else g.getThreads(g.currentRedditSettings[0],g.currentRedditSettings[1],g.currentRedditSettings[2],g.currentRedditSettings[3],g.nextPageReddit).done(function(){g.mainPage(),h.youtubeInUse="contentAvailable"
}),h.twitchInUse="no",h.youtubeInUse="no";$("#iframe-holder").html(" ").css("display","none"),$("#main-content").css("display","block"),$("header").css("height","100px"),$("#youtube-content").css("display","none"),$("#reddit-content").css("display","block"),$("#settings-content").css("display","none"),$("#twitch-content").css("display","none")}}function b(){if(d.match(/back/i)&&parseInt(localStorage.getItem("streamsLastRetrieved"))+9e5>=Date.now())f.azubuStreamersOffline=JSON.parse(localStorage.getItem("azubuStreamersOffline")),f.azubuStreamersOnline=JSON.parse(localStorage.getItem("azubuStreamersOnline")),f.topAzubuStreamersOnline=JSON.parse(localStorage.getItem("topAzubuStreamersOnline")),f.twitchStreamersOnline=JSON.parse(localStorage.getItem("twitchStreamersOnline")),f.twitchStreamersOffline=JSON.parse(localStorage.getItem("twitchStreamersOffline")),f.topTwitchStreamersOnline=JSON.parse(localStorage.getItem("topTwitchStreamersOnline")),f.totalStreamersOnline=parseInt(localStorage.getItem("totalStreamersOnline")),f.totalStreamersOnline>0&&$(".twitch-online").css("display","inline").text(f.totalStreamersOnline),f.offlineTwitchStreamers(),f.pushTwitchStreams(),f.pushTwitchStreamers(),f.pushAzubuStreamers(),f.pushTopTwitchStreamers(),"on"==appSettings[3].settingChoice&&f.pushStreamsHeader(),h.changeTwitchDimensions(),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"});else{f.totalStreamersOnline=0;var a=JSON.parse(localStorage.getItem("azubuStreamersOnline")),b=JSON.parse(localStorage.getItem("twitchStreamersOnline"));f.onlineTwitchStreamers().done(function(){localStorage.setItem("streamsLastRetrieved",Date.now()),f.streamFunctionCount>0&&("on"==appSettings[1].settingChoice||"on"==appSettings[2].settingChoice)&&f.favouriteStreamerMessage(a,b),f.offlineTwitchStreamers(),f.pushTwitchStreamers(),f.streamFunctionCount>0&&f.currentStreamOnline()||f.streamFunctionCount>0&&f.currentStreamViewers<40||f.pushTwitchStreams(),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"}),f.getAzubuStreamers().done(function(){f.pushAzubuStreamers(),f.totalStreamersOnline>0&&$(".twitch-online").css("display","inline").text(f.totalStreamersOnline),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"})}),f.topTwitchOnline().done(function(){f.pushTopTwitchStreamers(),"on"==appSettings[3].settingChoice&&f.pushStreamsHeader(),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"})}),f.totalStreamersOnline>0&&$(".twitch-online").css("display","inline").text(f.totalStreamersOnline),h.changeTwitchDimensions(),f.streamFunctionCount++})}}function c(){d.match(/back/i)&&parseInt(localStorage.getItem("rssLastRetrieved"))+12e5>=Date.now()?(e.newReignArticles&&(e.newReignArticles>=5?$(".reign-news").css("display","inline").html("5<span class='lighter'>+</span>"):$(".reign-news").css("display","inline").text(e.newReignArticles)),e.newOnGamers&&(e.newOnGamers>=5?$(".ongamers-news").css("display","inline").html("5<span class='lighter'>+</span>"):$(".ongamers-news").css("display","inline").text(e.newOnGamers)),e.newLeagueArticles&&(e.newLeagueArticles>=5?$(".league-news").css("display","inline").html("5<span class='lighter'>+</span>"):$(".league-news").css("display","inline").text(e.newLeagueArticles))):(localStorage.setItem("rssLastRetrieved",Date.now()),e.reignOfGaming().done(function(){e.newReignArticles&&(e.newReignArticles>=5?$(".reign-news").css("display","inline").html("5<span class='lighter'>+</span>"):$(".reign-news").css("display","inline").text(e.newReignArticles))}),e.onGamers().done(function(){e.newOnGamers&&(e.newOnGamers>=5?$(".ongamers-news").css("display","inline").html("5<span class='lighter'>+</span>"):$(".ongamers-news").css("display","inline").text(e.newOnGamers))}),e.LolInfo().done(function(){e.newLeagueArticles&&(e.newLeagueArticles>=5?$(".league-news").css("display","inline").html("5<span class='lighter'>+</span>"):$(".league-news").css("display","inline").text(e.newLeagueArticles))}))}var d=window.location.href,e=new LeagueLinks,f=new streamChannels,g=new RedditLol,h=new WebInterface;h.registerScreen(),window.onpopstate=function(){"yes"!=localStorage.getItem("sessionActive")||0==window.location.hash.length&&window.location.href!=window.location.origin||(h.checkIfBelongs()?($(".nav-button li").removeClass("selected-link"),a(),h.tabSystemProcessed=1):location.reload())},0==h.tabSystemProcessed&&(a(),setTimeout(function(){localStorage.setItem("sessionActive","yes")},2e4));var i=$("#reddit-content");i.on("click",".reddit-show-more",function(){var a=$(this).siblings(".reddit-expand"),b=a.children(".reddit-youtube-prev");b&&b.html('<div class="video-container"><iframe width="560" height="315" src="'+b.data("url")+'" frameborder="0" allowfullscreen></iframe></div>'),a.slideToggle()}),i.on("click",".original-state-content",function(){$(this).toggleClass("open-state-content")}),i.on("click",".original-state-media",function(){$(this).toggleClass("open-state-media")}),$(".dropdown-subreddit, .dropdown-reddit-options").on("change",function(){"undefined"!=typeof g.redditAjaxRequest&&g.redditAjaxRequest&&4!=g.redditAjaxRequest.readyState&&(g.redditAjaxRequest.abort(),0==g.youtubeVids.length&&(h.youtubeInUse="no")),g.redditThreads=[],g.redditCount=0,g.nextPageReddit=null;var a=$(".dropdown-subreddit").find("option:selected"),b=$(".dropdown-reddit-options").find("option:selected");g.currentRedditSettings=["reddit",a.data("subreddit"),b.data("type"),b.data("duration")],$(".reddit-setting").removeClass("setting-chosen"),$("."+b.data("duration")+b.data("type")+"-reddit").addClass("setting-chosen"),$(".subreddit-setting").removeClass("setting-chosen"),$(".subreddit-"+a.data("subreddit")).addClass("setting-chosen"),$("#reddit-threads").html(" "),$("#reddit-progress").html('<img src="assets/img/loader.gif" />'),g.getThreads(g.currentRedditSettings[0],g.currentRedditSettings[1],g.currentRedditSettings[2],g.currentRedditSettings[3]).done(function(){g.mainPage()})}),$(".subreddit-setting").on("click",function(a){var b=$(this);2==a.which?(window.open("http://www.reddit.com/r/"+b.data("subreddit")),a.preventDefault()):("undefined"!=typeof g.redditAjaxRequest&&g.redditAjaxRequest&&4!=g.redditAjaxRequest.readyState&&(g.redditAjaxRequest.abort(),0==g.youtubeVids.length&&(h.youtubeInUse="no")),$("#reddit-threads").html(" "),$("#reddit-progress").html('<img src="assets/img/loader.gif" />'),g.redditThreads=[],g.redditCount=0,g.nextPageReddit=null,g.currentRedditSettings=["reddit",b.data("subreddit"),b.data("type"),null,null],$(".reddit-setting").removeClass("setting-chosen"),$(".hot-reddit").addClass("setting-chosen"),b.siblings().removeClass("setting-chosen"),b.addClass("setting-chosen"),$(".dropdown-subreddit").val(b.data("subreddit")),$(".dropdown-reddit-options").val("hot"),g.getThreads(g.currentRedditSettings[0],g.currentRedditSettings[1],g.currentRedditSettings[2],g.currentRedditSettings[3]).done(function(){g.mainPage()}))}),$(".reddit-setting").on("click",function(a){var b=$(this);2===a.which?(window.open("top"==b.data("type")?"http://www.reddit.com/r/"+g.currentRedditSettings[1]+"/top/?sort=top&t="+b.data("duration"):"http://www.reddit.com/r/"+g.currentRedditSettings[1]+"/"+b.data("type")),a.preventDefault()):("undefined"!=typeof g.redditAjaxRequest&&g.redditAjaxRequest&&4!=g.redditAjaxRequest.readyState&&(g.redditAjaxRequest.abort(),0==g.youtubeVids.length&&(h.youtubeInUse="no")),$("#reddit-threads").html(" "),$("#reddit-progress").html('<img src="assets/img/loader.gif" />'),g.redditThreads=[],g.redditCount=0,g.nextPageReddit=null,g.currentRedditSettings=["reddit",g.currentRedditSettings[1],b.data("type"),b.data("duration")],b.siblings().removeClass("setting-chosen"),b.addClass("setting-chosen"),$(".dropdown-reddit-options").val(b.data("type")+b.data("duration")),g.getThreads(g.currentRedditSettings[0],g.currentRedditSettings[1],g.currentRedditSettings[2],g.currentRedditSettings[3]).done(function(){g.mainPage()}))}),$("#reddit-threads").on("click","a",function(){"on"==appSettings[0].settingChoice?$(this).attr("target","_blank"):($(this).attr("target","_self"),localStorage.setItem("yScroll",$(window).scrollTop()),"none"==$("#sidebar").css("display")?localStorage.setItem("sidebarOpen","none"):localStorage.setItem("sidebarOpen","block"),history.pushState("","","#back"))}),$(".dropdown-youtube-options").on("change",function(){$("#youtube-threads").html(" "),$("#youtube-progress").html('<img src="assets/img/loader.gif" />'),"undefined"!=typeof g.redditAjaxRequest&&g.redditAjaxRequest&&4!=g.redditAjaxRequest.readyState&&(g.redditAjaxRequest.abort(),0==g.youtubeVids.length&&(h.youtubeInUse="no"));var a=$(this).find("option:selected");g.youtubeVids=[],g.youtubeCount=0,g.currentYoutubeSettings=["youtube",g.currentYoutubeSettings[1],a.data("type"),a.data("duration")],$(".youtube-setting").removeClass("setting-chosen"),$("."+a.data("duration")+a.data("type")+"-youtube").addClass("setting-chosen"),g.getThreads(g.currentYoutubeSettings[0],g.currentYoutubeSettings[1],g.currentYoutubeSettings[2],g.currentYoutubeSettings[3]).done(function(){g.youtubeArea()})}),$(".youtube-setting").on("click",function(){var a=$(this);$("#youtube-threads").html(" "),$("#youtube-progress").html('<img src="assets/img/loader.gif" />'),$(".dropdown-youtube-options").val(a.data("type")+a.data("duration")),"undefined"!=typeof g.redditAjaxRequest&&g.redditAjaxRequest&&4!=g.redditAjaxRequest.readyState&&(g.redditAjaxRequest.abort(),0==g.redditThreads.length&&(h.redditInUse="no")),g.youtubeVids=[],g.youtubeCount=0,g.currentYoutubeSettings=["youtube",g.currentYoutubeSettings[1],a.data("type"),a.data("duration")],a.siblings().removeClass("setting-chosen"),a.addClass("setting-chosen"),g.getThreads(g.currentYoutubeSettings[0],g.currentYoutubeSettings[1],g.currentYoutubeSettings[2],g.currentYoutubeSettings[3]).done(function(){g.youtubeArea()})}),b(),setInterval(b,72e4);var j=$("#twitch-content");j.on("click",".view-this-stream",function(){var a=$(this);f.pushTwitchStreams(a.data("id"),a.data("type")),h.changeTwitchDimensions(),$("body,html").animate({scrollTop:0},400)}),j.on("click",".add-top-champ",function(){var a=$(this);f.totalStreamersOnline++,localStorage.setItem("totalStreamersOnline",JSON.stringify(f.totalStreamersOnline)),$(".twitch-online").css("display","inline").text(f.totalStreamersOnline),null!=a.data("id")?(f.pushTwitchStreams(a.data("id"),"top"),h.changeTwitchDimensions(),$("body,html").animate({scrollTop:0},600),f.submitStreamer(a.data("name")),f.pushTwitchStreamers(a.data("id"))):(f.pushAzubuStreamers(a.data("count")),f.submitStreamer(a.data("name"),"azubu")),a.fadeOut()}),j.on("click",".remove-twitch",function(){var a=$(this);a.parent().fadeOut(),f.removeStreamer(a.data("name"))}),j.on("click",".remove-twitch-online",function(){var a=$(this),b=a.data("name");a.parent().fadeOut(),$(".twitch-user-"+b).fadeOut(),f.removeStreamer(b),1==f.twitchStreamersOnline.length?$(".twitch-online").css("display","none"):$(".twitch-online").text(f.twitchStreamersOnline.length-1)}),j.on("click",".add-champ",function(){$(".champ-addition").val().length>0&&($(this).val("Streamer Added"),$(this).addClass("streamer-added"),f.submitStreamer($(".champ-addition").val()),b(),$(".champ-addition").val(""))}),$(".champ-addition").on("keydown",function(){$(".add-champ").val("Add Streamer"),$(".add-champ").removeClass("streamer-added")}),j.on("click",".view-twitch-chat",function(){var a=$(this);if(a.hasClass("close-twitch-chat"))a.prev().html(" "),a.removeClass("close-twitch-chat");else{var b=a.data("name");a.prev().html('<iframe frameborder="0" scrolling="no" id="chat_embed" src="http://twitch.tv/chat/embed?channel='+b+'&popout_chat=true" height="100%" width="300"></iframe>'),a.addClass("close-twitch-chat")}h.changeTwitchDimensions()}),$("#top-header-message").on("click",".close-riot, .close-favourite",function(){$(this).parent().fadeOut(function(){var a=$("#top-header-message");0==a.height()&&a.css("padding","0px")})}),c(),setInterval(c,15e5),$("#ongamers").on("click",function(){$(".ongamers-news").fadeOut(),localStorage.setItem("newOnGamers",0)}),$("#reign").on("click",function(){$(".reign-news").fadeOut(),localStorage.setItem("newReignArticles",0)}),$("#league").on("click",function(){$(".league-news").fadeOut(),localStorage.setItem("newLeagueArticles",0)}),$(".settings-update").on("click",function(){h.saveSettings(),$(this).addClass("setting-updated"),$(this).attr("value","Settings Updated")}),$(".redditNewTab, .twitchVisualNotifications, .twitchAudioNotifications, .eSportsNotifications, .defaultNameLink, .defaultChampLink, .smartEnter, .newWindow").on("change",function(){$(".settings-update").removeClass("setting-updated"),$(".settings-update").attr("value","Update Settings")});var k=1;$(window).on("scroll",function(){$(window).scrollTop()>=$(document).height()-$(window).height()-200&&("none"!=$("#reddit-content").css("display")&&(g.redditCount!=g.redditThreads.length?g.mainPage():null==g.nextPageReddit?$("#reddit-progress").html("<p>Sorry all out of reddit threads for now</p>"):1==k&&(k=0,g.getThreads("reddit",g.currentRedditSettings[1],g.currentRedditSettings[2],g.currentRedditSettings[3],g.nextPageReddit).done(function(){g.mainPage(),k=1}))),"none"!=$("#youtube-content").css("display")&&(g.youtubeCount!=g.youtubeVids.length?g.youtubeArea():null==g.nextPageYoutube?$("#youtube-progress").html("<p>Sorry all out of reddit threads for now</p>"):1==k&&(k=0,g.getThreads("youtube",g.currentYoutubeSettings[1],g.currentYoutubeSettings[2],g.currentYoutubeSettings[3],g.nextPageYoutube).done(function(){g.youtubeArea(),k=1}))))}),$("#youtube").on("click",function(a){if(2!==a.which){var b=$(this).data("name");history.pushState("","","#"+b),a.preventDefault(),"no"==h.youtubeInUse||parseInt(localStorage.getItem("youtubeLastRetrieved"))+18e5<=Date.now()?("undefined"!=typeof g.redditAjaxRequest&&g.redditAjaxRequest&&4!=g.redditAjaxRequest.readyState&&(g.redditAjaxRequest.abort(),0==g.redditThreads.length&&(h.redditInUse="no")),g.currentYoutubeSettings[0]="youtube",g.getThreads(g.currentYoutubeSettings[0],g.currentYoutubeSettings[1],g.currentYoutubeSettings[2],g.currentYoutubeSettings[3],g.nextPageYoutube).done(function(){g.youtubeArea(),$(window).height()>1080&&g.youtubeArea()}),h.youtubeInUse="yes"):"contentAvailable"==h.youtubeInUse&&(g.youtubeArea(),$(window).height()>1080&&g.youtubeArea()),$("#iframe-holder").html(" "),$("header").css("height","100px"),$("#youtube-content").css("display","block"),$("#reddit-content").css("display","none"),$("#twitch-content").css("display","none"),$("#settings-content").css("display","none")}}),$("#twitch").on("click",function(a){if(2!==a.which){parseInt(localStorage.getItem("streamsLastRetrieved"))+48e4<=Date.now()&&b(),$(window).scrollTop(0),$("#iframe-holder").html(" "),$("header").css("height","28px"),$("#twitch-content").css("display","block"),$("#reddit-content").css("display","none"),$("#youtube-content").css("display","none"),$("#settings-content").css("display","none");var c=$(this).data("name");history.pushState("","","#"+c),a.preventDefault()}}),$("#settings").on("click",function(a){if(2!==a.which){$(window).scrollTop(0),$("#iframe-holder").html(" "),$("header").css("height","28px"),$("#twitch-content").css("display","none"),$("#reddit-content").css("display","none"),$("#youtube-content").css("display","none"),$("#settings-content").css("display","block"),h.setSettings(),$(".settings-update").removeClass("setting-updated"),$(".settings-update").attr("value","Update Settings");var b=$(this).data("name");history.pushState("","","#"+b),a.preventDefault()}}),$("#reddit").on("click",function(a){if(2!==a.which){var b=$(this).data("name");history.pushState("","","#"+b),a.preventDefault(),("no"==h.redditInUse||parseInt(localStorage.getItem("redditLastRetrieved"))+18e5<=Date.now())&&($("#reddit-threads").html(" "),$("#reddit-progress").html('<img src="assets/img/loader.gif" />'),g.currentRedditSettings[null],g.redditThreads=[],g.redditCount=0,g.nextPageReddit=null,g.getThreads(g.currentRedditSettings[0],g.currentRedditSettings[1],g.currentRedditSettings[2],g.currentRedditSettings[3],g.nextPageReddit).done(function(){g.mainPage()}),h.redditInUse="yes"),$("#iframe-holder").html(" "),$("header").css("height","100px"),$("#reddit-content").css("display","block"),$("#youtube-content").css("display","none"),$("#twitch-content").css("display","none"),$("#settings-content").css("display","none")}}),$(".nav-expand").on("click",function(){var a=$("#sidebar");"none"==a.css("display")?detectmob()?(a.slideDown(),$(window).scrollTop(0)):(a.css("display","block"),$("#main-content, #iframe-holder").css("margin-left","335px"),$(this).css("left","335px"),h.changeTwitchDimensions()):detectmob()?($(window).scrollTop()<=a.height()+20&&a.slideUp(),$(this).css("left","50%"),$("body,html").animate({scrollTop:0},400)):(a.css("display","none"),$("#main-content, #iframe-holder").css("margin-left","0px"),$(this).css("left","0px"),h.changeTwitchDimensions())});var l;$(".name").on("keyup",function(){e.account($(".name").val(),$(".server").val());var a=event.keyCode?event.keyCode:event.which;if(clearTimeout(l),l=setTimeout(function(){$(".website-name li:not(.selected-link)").animate({backgroundColor:"#303033",color:"#939393"},150).animate({opacity:"1"},120).animate({backgroundColor:"#262729",color:"#5e5e5e"},{duration:400,complete:function(){$(this).attr("style"," ")}})},375),"13"==a)if(clearTimeout(l),h.checkIfBelongs(".website-name")&&"on"==appSettings[6].settingChoice)detectmob()?window.location.replace(h.checkIfBelongs(".website-name")):h.makeIframe(h.checkIfBelongs(".website-name"));else{var b=$("#"+appSettings[4].settingChoice);detectmob()?window.location.replace(b.attr("href")):(h.makeIframe(b.attr("href")),$(".nav-button li").removeClass("selected-link"),b.children("li").addClass("selected-link"),history.pushState("","","#"+b.data("name")))}}),$(".server").on("change",function(){e.account($(".name").val(),$(".server").val()),$(".website-name li:not(.selected-link)").animate({backgroundColor:"#303033",color:"#939393"},150).animate({opacity:"1"},120).animate({backgroundColor:"#262729",color:"#5e5e5e"},{duration:400,complete:function(){$(this).attr("style"," "),clickedPreviously=!1}})}),$(".champ-list").on("click",function(){e.champion($(".champ").val()),e.dropDownTemplate($(".champ").val()),$(".champ-list-entry > #champ-drop").not($(this).children("#champ-drop")).hide(),$(this).children("#champ-drop").toggle()}),$(".champ").on("click",function(){$("#champ-drop").css("display","block"),e.champion($(this).val()),e.dropDownTemplate($(this).val())}),$(".champ").on("keyup",function(){var a=$(this).val(),b=new RegExp(a,"i"),c=event.keyCode?event.keyCode:event.which;if("13"==c){var d=$("#champ-drop .champ-list-entry .champ-text").first().text();if(d.length>0&&$(this).val(d),$("#champ-drop").fadeOut(),e.champion($(this).val()),h.checkIfBelongs(".website-champ")&&"on"==appSettings[6].settingChoice)detectmob()?window.location.replace(h.checkIfBelongs(".website-champ")):h.makeIframe(h.checkIfBelongs(".website-champ"));else{var f=$("#"+appSettings[5].settingChoice);detectmob()?window.location.replace(f.attr("href")):(h.makeIframe(f.attr("href")),$(".nav-button li").removeClass("selected-link"),f.children("li").addClass("selected-link"),history.pushState("","","#"+f.data("name")))}}else{e.dropDownTemplate(a),$("#champ-drop").css("display","block"),$("#champ-drop .champ-list-entry .champ-text").each(function(){var b=$(this),c=b.html(),d=c.slice(0,a.length),e=c.slice(a.length);b.html("<span style='color:#f0e863'>"+d+"</span>"+e)}),e.champion(a);for(var g=0;g<e.championList.length;g++)e.championList[g].name.match(b)&&e.championList[g].name.length==a.length&&($("#champ-drop .champ-list-entry").css({"background-color":"#666",border:"2px solid black"}),setTimeout(function(){$("#champ-drop").fadeOut(),$(".website-champ li:not(.selected-link)").animate({backgroundColor:"#303033",color:"#939393"},150).animate({opacity:"1"},120).animate({backgroundColor:"#262729",color:"#5e5e5e"},{duration:400,complete:function(){$(this).attr("style"," ")}})},100))}}),$("#champ-drop").on("click",".champ-list-entry",function(){var a=$(this).data("name");$(".champ").val(a),$(".website-champ li:not(.selected-link)").animate({backgroundColor:"#303033",color:"#939393"},150).animate({opacity:"1"},120).animate({backgroundColor:"#262729",color:"#5e5e5e"},{duration:400,complete:function(){$(this).attr("style"," ")}})}),$(".iframe-capable").on("click",function(a){if(2!==a.which&&!detectmob()){$("#main-content").fadeOut();var b=$(this).attr("href"),c=$(this).data("name");h.makeIframe(b),history.pushState("","","#"+c),a.preventDefault()}}),$(".no-iframe").on("click",function(a){2!==a.which&&($("#main-content").css("display","block"),$("#iframe-holder").css("display","none"))}),$(window).resize(function(){h.changeIframeHeight(),h.changeTwitchDimensions(),h.registerScreen()}),$(window).scroll(function(){$(this).scrollTop()>100?$("#back-top").fadeIn():$("#back-top").fadeOut()}),$("#back-top a").click(function(){return $("body,html").animate({scrollTop:0},700),!1}),$("#reddit, #youtube, #twitch, #settings").on("click",function(){detectmob()&&$("#sidebar").slideUp()}),$(".nav-button").on("click",function(a){2!==a.which&&($(".nav-button li").removeClass("selected-link"),$(this).children("li").addClass("selected-link"))}),$(".tooltip").tipsy({gravity:"w"}),$(".settings-tooltip").tipsy({gravity:"e"}),$(window).unload(function(){localStorage.setItem("sessionActive","no")})});