function streamEvents(){if(currentUrl.match(/back/i)&&parseInt(localStorage.getItem("streamsLastRetrieved"))+9e5>=Date.now())streams.azubuStreamersOffline=JSON.parse(localStorage.getItem("azubuStreamersOffline")),streams.azubuStreamersOnline=JSON.parse(localStorage.getItem("azubuStreamersOnline")),streams.topAzubuStreamersOnline=JSON.parse(localStorage.getItem("topAzubuStreamersOnline")),streams.twitchStreamersOnline=JSON.parse(localStorage.getItem("twitchStreamersOnline")),streams.twitchStreamersOffline=JSON.parse(localStorage.getItem("twitchStreamersOffline")),streams.topTwitchStreamersOnline=JSON.parse(localStorage.getItem("topTwitchStreamersOnline")),streams.totalStreamersOnline=parseInt(localStorage.getItem("totalStreamersOnline")),streams.totalStreamersOnline>0&&$(".twitch-online").css("display","inline").text(streams.totalStreamersOnline),streams.offlineTwitchStreamers(),streams.pushTwitchStreams(),streams.pushTwitchStreamers(),streams.pushAzubuStreamers(),streams.pushTopTwitchStreamers(),"on"==appSettings.eSportsNotifications&&streams.pushStreamsHeader(),web.changeTwitchDimensions(),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"});else{streams.totalStreamersOnline=0;var a=JSON.parse(localStorage.getItem("azubuStreamersOnline")),b=JSON.parse(localStorage.getItem("twitchStreamersOnline"));streams.onlineTwitchStreamers().done(function(){localStorage.setItem("streamsLastRetrieved",Date.now()),streams.streamFunctionCount>0&&("on"==appSettings.twitchVisualNotifications||"on"==appSettings.twitchAudioNotifications)&&(streams.favouriteStreamerMessage(a,b),streams.recentlyAddedTwitch=[],streams.recentlyAddedAzub=[]),streams.offlineTwitchStreamers(),streams.pushTwitchStreamers(),streams.streamFunctionCount>0&&streams.currentStreamOnline()||streams.streamFunctionCount>0&&streams.currentStreamViewers<40||streams.pushTwitchStreams(),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"}),streams.getAzubuStreamers().done(function(){streams.pushAzubuStreamers(),streams.totalStreamersOnline>0&&$(".twitch-online").css("display","inline").text(streams.totalStreamersOnline),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"})}),streams.topTwitchOnline().done(function(){streams.pushTopTwitchStreamers(),"on"==appSettings.eSportsNotifications&&streams.pushStreamsHeader(),$(".tooltip-left").tipsy({gravity:"e"}),$(".tooltip-viewers").tipsy({gravity:"w"}),$(".tooltip-center").tipsy({gravity:"n"})}),streams.totalStreamersOnline>0&&$(".twitch-online").css("display","inline").text(streams.totalStreamersOnline),web.changeTwitchDimensions(),streams.streamFunctionCount++})}}streamEvents(),setInterval(streamEvents,72e4);var $twitchHolder=$("#twitch-content");$twitchHolder.on("click",".view-this-stream",function(){var a=$(this);streams.pushTwitchStreams(a.data("id"),a.data("type")),web.changeTwitchDimensions(),$("body,html").animate({scrollTop:0},400)}),$twitchHolder.on("click",".add-top-champ",function(){var a=$(this);streams.totalStreamersOnline++,localStorage.setItem("totalStreamersOnline",JSON.stringify(streams.totalStreamersOnline)),$(".twitch-online").css("display","inline").text(streams.totalStreamersOnline),null!=a.data("id")?(streams.pushTwitchStreams(a.data("id"),"top"),web.changeTwitchDimensions(),$("body,html").animate({scrollTop:0},600),streams.submitStreamer(a.data("name")),streams.pushTwitchStreamers(a.data("id"))):(streams.pushAzubuStreamers(a.data("count")),streams.submitStreamer(a.data("name"),"azubu")),a.after('<span class="favourited-streamer tooltip-left" original-title="You have this streamer favourited">&lt;3</span>'),a.fadeOut()}),$twitchHolder.on("click",".remove-twitch",function(){var a=$(this);a.parent().fadeOut(),streams.removeStreamer(a.data("name"))}),$twitchHolder.on("click",".remove-twitch-online",function(){var a=$(this),b=a.data("name");a.parent().fadeOut(),$(".twitch-user-"+b).fadeOut(),streams.removeStreamer(b),1==streams.twitchStreamersOnline.length?$(".twitch-online").css("display","none"):$(".twitch-online").text(streams.twitchStreamersOnline.length-1)}),$twitchHolder.on("click",".add-champ",function(){$(".champ-addition").val().length>0&&($(this).val("Streamer Added"),$(this).addClass("streamer-added"),streams.submitStreamer($(".champ-addition").val()),streamEvents(),$(".champ-addition").val(""))}),$(".champ-addition").on("keydown",function(){$(".add-champ").val("Add Streamer"),$(".add-champ").removeClass("streamer-added")}),$twitchHolder.on("click",".view-twitch-chat",function(){var a=$(this);if(a.hasClass("close-twitch-chat"))a.prev().html(" "),a.removeClass("close-twitch-chat");else{var b=a.data("name");a.prev().html('<iframe frameborder="0" id="chat_embed" src="http://twitch.tv/chat/embed?channel='+b+'&popout_chat=true" height="100%" width="300"></iframe>'),a.addClass("close-twitch-chat")}web.changeTwitchDimensions()}),$("#top-header-message").on("click",".close-riot, .close-favourite",function(){$(this).parent().fadeOut(function(){var a=$("#top-header-message");0==a.height()&&a.css("padding","0px")})});